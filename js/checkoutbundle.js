(()=>{let t={};const e=document.querySelector(".checkout__price span");let n=parseInt(e.innerHTML,10);class r{constructor(e){this.name=e.dataset.productname,this.countWrapper=document.querySelector(`[data-productname="${this.name}"] .cart-product__count span`),this.count=parseInt(this.countWrapper.innerHTML,10),this.productPriceWrapper=document.querySelector(`[data-productname="${this.name}"] .product-features__price span`),this.productPrice=parseInt(this.productPriceWrapper.innerHTML,10),this.plusBtn=document.querySelector(`[data-productname="${this.name}"] .cart-product__btn.plus`),this.minusBtn=document.querySelector(`[data-productname="${this.name}"] .cart-product__btn.minus`),t[this.name]=this.productPrice,this.btnListener()}btnListener(){this.plusBtn.addEventListener("click",(t=>{this.countChange(!0)})),this.minusBtn.addEventListener("click",(t=>{this.countChange(!1)}))}countChange(t){if(t)this.count++;else{if(1==this.count)return void this.deleteItemFromCart();this.count--}this.countWrapper.innerHTML=this.count,this.itemPriceChange()}itemPriceChange(){const r=this.productPrice*this.count,c=r-t[this.name];t[this.name]=r,function(t){n+=t,e.innerHTML=n}(c)}deleteItemFromCart(){}}const c=document.querySelectorAll(".cart-product");for(let t=0;t<c.length;t++)new r(c[t]);function i(){if(window.matchMedia("(max-width: 900px)").matches){const t=document.querySelector(".input-phone");document.querySelector(".input-email").insertAdjacentElement("beforebegin",t)}}i(),window.addEventListener("resize",i);const o=document.querySelector(".shipping-form__body");document.addEventListener("DOMContentLoaded",(function(){function t(t){t.classList.add("_error")}function e(t){t.classList.remove("_error")}null!=o&&o.addEventListener("submit",(async function(n){n.preventDefault(),function(){let n=0;const r=document.querySelector(".input-email");e(r),!/^[\w]{1}[\w-\.]*@[\w-]+\.[a-z]{2,4}$/i.test(r.value)&&(t(r),n++);const c=document.querySelector(".input-phone");return e(c),function(t){return!/^\+?[78][-\(]?\d{3}\)?-?\d{3}-?\d{2}-?\d{2}$/.test(t.value)}(c)&&(t(c),n++),n}()||o.reset()}))}))})();